<!DOCTYPE html>
<html>
<head>
<meta name="description" content="Better Select">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Better Select</title>
<script type="text/javascript" src="//code.jquery.com/jquery-3.1.0.js"></script>
<script type="text/javascript" src="better-select.js"></script>
<link rel="stylesheet" href="//stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="better-select.css">
<script type="text/javascript">
$(document).ready(function() {
	
	$('select').betterSelect({
		inputClass: 'form-control',
		selectedOption: function(option) {

			if ($(option).hasClass('selected')) {
				alert('You have selected ' + $(option).text());
			} else {
				alert('You have deselected ' + $(option).text());
			}

			if ($(option).hasClass('selected')) {

				if (!$('#result [data-value="' + $(option).attr('data-value') + '"]').length) {
					$('#result').append('<tr data-value="' + $(option).attr('data-value') + '"><td>' + $(option).text().trim() + '</td><td></td><td></td></tr>');
				}

			} else if ($('#result [data-value="' + $(option).attr('data-value') + '"]').length) {
				$('#result [data-value="' + $(option).attr('data-value') + '"]').remove();
			}

		}
	});

});
</script>
<style type="text/css">
.fancybox-simulator {
	width: 80%;
	height: 400px;
	position: absolute;
	top: 50%;
	left: 50%;
	-webkit-transform: translate(-50%, -50%);
	-moz-transform: translate(-50%, -50%);
	-ms-transform: translate(-50%, -50%);
	-o-transform: translate(-50%, -50%);
	transform: translate(-50%, -50%);
	background-color: #eaeaea;
	overflow-y: scroll;
}

.custom-wrapper {
	width: 100%;
	height: 50%;
	position: relative;
}

table {
	width: 100%;
}
</style>
</head>
<body>
<div class="fancybox-simulator">
	<select class="select2" name="select">
		<optgroup label="Top Level 1" data-level="top"></optgroup>
		<optgroup label="Second Level 1-1">
			<option value="1-1">First Option 1-1-1</option>
			<option value="2-1">Second Option 1-1-2</option>
			<option value="3-1">Third Option 1-1-3</option>
		</optgroup>
		<optgroup label="Second Level 1-2">
			<option value="1-1">First Option 1-2-1</option>
			<option value="2-1">Second Option 1-2-2</option>
			<option value="3-1">Third Option 1-2-3</option>
		</optgroup>
		<optgroup label="Top Level 2" data-level="top"></optgroup>
		<optgroup label="Second Level 2-1">
			<option value="1-2">First Option 2-1-1</option>
			<option value="2-2">Second Option 2-1-2</option>
			<option value="3-2">Third Option 2-1-3</option>
		</optgroup>
		<optgroup label="Second Level 2-2">
			<option value="1-2">First Option 2-2-1</option>
			<option value="2-2">Second Option 2-2-2</option>
			<option value="3-2">Third Option 2-2-3</option>
		</optgroup>
	</select>
	<div class="custom-wrapper">
		<table id="result">
			<tr>
				<th>Col 1</th>
				<th>Col 2</th>
				<th>Col 3</th>
			</tr>
		</table>
	</div>
</div>
</body>
</html>